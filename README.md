# Система бронирования места в автобусе

используется in-memory потоко-безопасное хранилище

Пример брони:  
`1: ABCD45 / 2022-01-01 / 7`  
внутренний идентификатор: `1` - инкремент  
маршрут: `ABCD45` - 4-10 символов  
дата: `2022-01-01` - строковое представление в формате `YYYY-MM-DD`  
номер места: `7` - от 1 до 100 включительно

### Использование

сборка: `make run`  
запуск: `make build`

Возможности взаимодействия:  
1. [telegram_bot](https://t.me/tigprog_bot) -
необходимо задать переменную окружения TELEGRAM_API_KEY с токеном телеграм бота  
2. gRPC сервер на `localhost:8081` (присутствует пример клиента `client/client.go`)
3. HTTP-сервер на `localhost:8080`

### Функциональность телеграм бота

1. при отправке сообщения или пустой команды (`/`) работает как эхобот
2. при отправке некорректной команды сработает предложение о вводе `/help`
3. `/help` - список доступных команд
4. `/list` - вывести все забронированые места
5. `/get <id>` - вывести бронь по идентификатору
6. `/add <route> <date> <seat>` - создань новую бронь
7. `/change_seat <id> <seat>` -
   обновить номер места на значение `seat` по идентификатору
8. `/change_date_seat <id> <date> <seat>` -
   обновить дату и номер места на значения `date` и `new_value` по идентификатору
9. `/delete <id>` - удалить бронь по идентификатору

При добавлении или изменении брони, проверяется, не занята ли новая бронь ранее.

Все CRUD + List команды также есть в gRPC-сервере и HTTP-сервере.  
Обращаю внимание, что update/PUT представлен в виде 2 специфицированных методов.
